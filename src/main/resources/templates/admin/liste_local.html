<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <span th:replace="layouts/head :: head"></span>
    <title>Liste des locaux</title>
</head>
<body>
    <span th:replace="layouts/admin_navbar :: admin_navbar"></span>

    <div data-th-if="${param.updateSuccess!= null}" class="alert  alert-success fade show alert-dismissible" role="alert" data-mdb-color="success" id="customxD" bis_skin_checked="1">
        <strong>Le local est modifié </strong>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <div data-th-if="${param.deleteSuccess!= null}" class="alert  alert-success fade show alert-dismissible" role="alert" data-mdb-color="success" id="customxD2" bis_skin_checked="1">
        <strong>Le local est supprimé </strong>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <div data-th-if="${param.error!= null}" class="alert  alert-success fade show alert-dismissible" role="alert" data-mdb-color="success" id="customxD3" bis_skin_checked="1">
        <strong>Erreur </strong>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <div class="container">

      <h1 class="pt-5">Liste des locaux</h1>
        <form>
            <label for="options">Sélectionnez une option:</label>
            <select id="options" onchange="location = this.value;" th:with="urlV='/admin/liste/local'">
                <option th:value="${urlV}" th:selected="${filtreName == 'tous'}">Tous</option>
                <option th:value="${urlV}+'/enable'" th:selected="${filtreName == 'enable'}">Actif</option>
                <option th:value="${urlV}+'/disable'" th:selected="${filtreName == 'disable'}">Bloqué</option>
                <option th:value="${urlV}+'/inwaiting'" th:selected="${filtreName == 'wait'}">En attente</option>
              </select>
        </form>

      <table class="table table-striped table-sm align-middle">
        <thead>
        <tr>
          <th>Nom</th>
          <th>Adresse</th>
          <th>Action</th>
        </tr>
        <thead>
        <tbody>
            <tr th:each="local : ${locals}">
              <td th:utext="${local.name}"></td>
              <td th:utext="${local.address}"></td>
              <td >
                  <span>
                    <a th:href="${'/admin/local/'+local.id}" id="edit">
                        <button type="button" class="btn btn-primary">Détails</button>
                    </a>
                  </span>
                  <span th:if="${local.etat == T(com.ufr.tlib.models.Etat).ENABLE}">
                    <a th:href="${'/admin/local/bloquer/'+local.id}" id="edit">
                        <button type="button" class="btn btn-warning">Bloquer</button>
                    </a>
                  </span>
                  <span th:if="${local.etat == T(com.ufr.tlib.models.Etat).DISABLE}" >
                      <a th:href="${'/admin/local/debloquer/'+local.id}" id="edit">
                        <button type="button" class="btn btn-warning">Débloquer</button>
                      </a>
                  </span>
                  <span th:if="${local.etat == T(com.ufr.tlib.models.Etat).INWAITING}" >
                      <a th:href="${'/admin/local/accepter/'+local.id}" id="edit">
                        <button type="button" class="btn btn-warning">Accepter</button>
                      </a>
                  </span>
                  <span>
                    <a th:href="${'/admin/local/delete/'+local.id}" id="supprimer">
                      <button type="button" class="btn btn-danger">Supprimer</button>
                    </a>
                  </span>
              </td>
            </tr>
        </tbody>
      </table>
    </div>
    <span th:replace="layouts/foot :: foot"></span>
</body>
</html>